$(document).ready(function(){var f=document.getElementById("domain").getAttribute("value");$("#message-form").submit(function(n){n.preventDefault();g()});function d(n){$("#users").append('<div class="user-icon" id="user-'+n+'" style="background-color:#'+n+'"></div>')}function e(n){$("#user-"+n).remove()}$("#send-button").on("click",function(){g()});$("#updates").append('<div class="small-card" id="status"><p class="status">Connecting...</p></div>');var i;var l;if(f.includes("https://")){l="wss"}else{l="ws"}i=new WebSocket(l+f.substr(f.indexOf("://"))+"/chat/websocket/"+Cookies.get("chat-id").substr(1));var m=document.getElementById("message");i.onopen=function(n){c(n)};i.onmessage=function(n){k(n)};i.onclose=function(n){h(n)};i.onerror=function(n){b(n)};function g(){i.send(m.value);m.value=""}function k(v){var r=v.data;var n=new Map();while(r.indexOf(":")!=-1&&r.indexOf(":")<r.indexOf("|")){var o=r.substr(0,r.indexOf(":"));r=r.substr(r.indexOf(":")+1);var s=0;if(r.indexOf(",")!=-1&&r.indexOf(",")<r.indexOf("|")){s=r.indexOf(",")}else{s=r.indexOf("|")}var t=r.substr(0,s);r=r.substr(s+1);n.set(o,t)}if(n.get("direct-display")==="false"){if(r.substr(0,9)==="user-join"){d(r.substr(10,6))}else{if(r.substr(0,9)==="user-exit"){e(r.substr(10,6))}else{if(r.substr(0,7)==="clients"){r=r.substr(7);if(r.length>1){while(r.length>0){var p=r.substr(1,6);d(p);r=r.substr(7)}}}else{$("#messages").append('<div class="small-card"><p class="status">'+r+"</p></div>")}}}}else{var q=n.get("client-name");var u=n.get("text-color");$("#messages").append('<div class="small-card" style="background-color:#'+q+'"><p style="color:#'+u+'">'+r+"</p></div>")}}function c(n){$("#status").replaceWith('<div class="small-card" id="status"><p class="status">Connected!</p>');window.setTimeout(function(){$("#status").remove()},3000)}function h(n){$("#updates").append('<div class="small-card"><p class="warn">Disconnected</p></div>');window.setTimeout(function(){$("#updates").append('<div class="small-card"><p class="status">Reloading...</p></div>');location.reload()},3000)}function b(n){$("#updates").append('<div class="small-card"><p class="warn">Error!</p></div>')}$("html").css("font-size",Cookies.get("font-size"));$("#text-up").on("click",function(){var n=parseFloat(window.getComputedStyle(document.getElementById("html")).fontSize);$("#font-size").remove();$("html").css("font-size",(n+1)+"px");Cookies.set("font-size",(n+1)+"px")});$("#text-dn").on("click",function(){var n=parseFloat(window.getComputedStyle(document.getElementById("html")).fontSize);$("#font-size").remove();$("html").css("font-size",(n-1)+"px");Cookies.set("font-size",(n-1)+"px")});function a(n){if(n==="light"||n==="dark"||n==="rainbow"){}else{n="light"}$("#theme-styles").attr("href",f+"/src/common/"+n+"-common.min.css");Cookies.set("theme",n);$(".theme-button").show();$("#"+n+"-theme-button").hide()}a(Cookies.get("theme"));$(".theme-button").each(function(){var n=$(this);n.on("click",function(){a(n.attr("data"))})});function j(n){if(n==="light"){$("p").css("font-weight","200");$(".bold").css("font-weight","400");$("h6").css("font-weight","400");$("#font-light-button").hide();$("#font-normal-button").show();Cookies.set("font-weight","light")}else{$("p").css("font-weight","400");$(".bold").css("font-weight","600");$("h6").css("font-weight","600");$("#font-normal-button").hide();$("#font-light-button").show();Cookies.set("font-weight","normal")}}j(Cookies.get("font-weight"));$("#font-light-button").on("click",function(){j("light")});$("#font-normal-button").on("click",function(){j("normal")});$(".ajax-bar").each(function(){$(this).show()});$("#option-pane-open-button").on("click",function(){$("#option-pane").show();$("#option-pane-close-button").show();$(this).hide()});$("#option-pane-close-button").on("click",function(){$("#option-pane").hide();$("#option-pane-open-button").show();$(this).hide()})});