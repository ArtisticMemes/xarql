$(document).ready(function(){var t=document.getElementById("domain").getAttribute("value");$("#message-form").submit(function(u){u.preventDefault();e()});function o(u){$("#users").append('<div class="user-icon" id="user-'+u+'" style="background-color:#'+u+'"></div>')}function a(u){$("#user-"+u).remove()}function l(u){if(Cookies.get("theme")==="dark"){$("#user-"+u).css("box-shadow","0px 5px 5px #000")}else{$("#user-"+u).css("box-shadow","0px 5px 5px #999")}}function h(u){$("#user-"+u).css("box-shadow","none")}function p(u){$("#user-"+u).css("border-radius","100%")}function d(u){$("#user-"+u).css("border-radius","25%")}$("#send-button").on("click",function(){e()});$("#updates").append('<div class="small-card" id="status"><p class="status">Connecting...</p></div>');var m;var k;if(t.includes("https://")){k="wss"}else{k="ws"}m=new WebSocket(k+t.substr(t.indexOf("://"))+"/chat/websocket/"+Cookies.get("chat-id").substr(1));var i=document.getElementById("message");m.onopen=function(u){g(u)};m.onmessage=function(u){s(u)};m.onclose=function(u){n(u)};m.onerror=function(u){r(u)};function e(){if(i.value.length!==0&&i.value.trim()!==""){m.send("type:message|"+i.value)}i.value=""}function s(C){var y=C.data;var u=new Map();while(y.indexOf(":")!=-1&&y.indexOf(":")<y.indexOf("|")){var v=y.substr(0,y.indexOf(":"));y=y.substr(y.indexOf(":")+1);var z=0;if(y.indexOf(",")!=-1&&y.indexOf(",")<y.indexOf("|")){z=y.indexOf(",")}else{z=y.indexOf("|")}var A=y.substr(0,z);y=y.substr(z+1);u.set(v,A)}if(u.get("type")!=="message"){if(u.get("type")==="user-join"){o(u.get("client-color"))}else{if(u.get("type")==="user-exit"){a(u.get("client-color"))}else{if(u.get("type")==="users-report"){y=y.substr(7);if(y.length>1){while(y.length>0){var w=y.substr(1,6);o(w);y=y.substr(7)}}}else{if(u.get("type")==="typing-status"){if(u.get("typing")==="true"){l(u.get("client-color"))}else{if(u.get("typing")==="false"){h(u.get("client-color"))}}}else{if(u.get("type")==="buffer-status"){if(u.get("buffer")==="true"){p(u.get("client-color"))}else{if(u.get("buffer")==="false"){d(u.get("client-color"))}}}else{$("#messages").append('<div class="small-card"><p class="status">'+y+"</p></div>")}}}}}}else{var x=u.get("client-color");var B=u.get("text-color");$("#messages").append('<div class="small-card" style="background-color:#'+x+'"><p style="color:#'+B+'">'+y+"</p></div>")}}function g(u){$("#status").replaceWith('<div class="small-card" id="status"><p class="status">Connected!</p>');window.setTimeout(function(){$("#status").remove()},3000)}function n(u){$("#updates").append('<div class="small-card"><p class="warn">Disconnected</p></div>');window.setTimeout(function(){$("#updates").append('<div class="small-card"><p class="status">Reloading...</p></div>');location.reload()},3000)}function r(u){$("#updates").append('<div class="small-card"><p class="warn">Error!</p></div>')}var f=true;var q=false;var c=false;$("#message").on("change keyup keydown paste",function(){if(i.value.trim()!==""){if(!c){m.send("type:buffer,buffer:true|true");c=true}}else{if(c){m.send("type:buffer,buffer:false|false");c=false}}console.log(event.which);if(event.which!==13&&event.which!==8&&typeof event.which!=="undefined"){if(f){if(q==false){q=true;m.send("type:typing,typing:true|true")}f=false;setTimeout(function(){f=true;setTimeout(function(){if(f){m.send("type:typing,typing:false|false");q=false}},300)},1000)}}});$("html").css("font-size",Cookies.get("font-size"));$("#text-up").on("click",function(){var u=parseFloat(window.getComputedStyle(document.getElementById("html")).fontSize);$("#font-size").remove();$("html").css("font-size",(u+1)+"px");Cookies.set("font-size",(u+1)+"px")});$("#text-dn").on("click",function(){var u=parseFloat(window.getComputedStyle(document.getElementById("html")).fontSize);$("#font-size").remove();$("html").css("font-size",(u-1)+"px");Cookies.set("font-size",(u-1)+"px")});function b(u){if(u==="light"||u==="dark"||u==="rainbow"){}else{u="light"}$("#theme-styles").attr("href",t+"/src/common/"+u+"-common.min.css");Cookies.set("theme",u);$(".theme-button").show();$("#"+u+"-theme-button").hide()}b(Cookies.get("theme"));$(".theme-button").each(function(){var u=$(this);u.on("click",function(){b(u.attr("data"))})});function j(u){if(u==="light"){$("p").css("font-weight","200");$(".bold").css("font-weight","400");$("h6").css("font-weight","400");$("#font-light-button").hide();$("#font-normal-button").show();Cookies.set("font-weight","light")}else{$("p").css("font-weight","400");$(".bold").css("font-weight","600");$("h6").css("font-weight","600");$("#font-normal-button").hide();$("#font-light-button").show();Cookies.set("font-weight","normal")}}j(Cookies.get("font-weight"));$("#font-light-button").on("click",function(){j("light")});$("#font-normal-button").on("click",function(){j("normal")});$(".ajax-bar").each(function(){$(this).show()});$("#option-pane-open-button").on("click",function(){$("#option-pane").show();$("#option-pane-close-button").show();$(this).hide()});$("#option-pane-close-button").on("click",function(){$("#option-pane").hide();$("#option-pane-open-button").show();$(this).hide()})});