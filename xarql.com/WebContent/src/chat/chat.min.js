$(document).ready(function(){var f=document.getElementById("domain").getAttribute("value");$("#message-form").submit(function(r){r.preventDefault();g()});function d(r){$("#users").append('<div class="user-icon" id="user-'+r+'" style="background-color:#'+r+'"></div>')}function e(r){$("#user-"+r).remove()}function i(r){if(Cookies.get("theme")==="dark"){$("#user-"+r).css("box-shadow","0px 5px 5px #000")}else{$("#user-"+r).css("box-shadow","0px 5px 5px #999")}}function n(r){$("#user-"+r).css("box-shadow","none")}$("#send-button").on("click",function(){g()});$("#updates").append('<div class="small-card" id="status"><p class="status">Connecting...</p></div>');var j;var p;if(f.includes("https://")){p="wss"}else{p="ws"}j=new WebSocket(p+f.substr(f.indexOf("://"))+"/chat/websocket/"+Cookies.get("chat-id").substr(1));var q=document.getElementById("message");j.onopen=function(r){c(r)};j.onmessage=function(r){m(r)};j.onclose=function(r){h(r)};j.onerror=function(r){b(r)};function g(){j.send("type:message|"+q.value);q.value=""}function m(z){var v=z.data;var r=new Map();while(v.indexOf(":")!=-1&&v.indexOf(":")<v.indexOf("|")){var s=v.substr(0,v.indexOf(":"));v=v.substr(v.indexOf(":")+1);var w=0;if(v.indexOf(",")!=-1&&v.indexOf(",")<v.indexOf("|")){w=v.indexOf(",")}else{w=v.indexOf("|")}var x=v.substr(0,w);v=v.substr(w+1);r.set(s,x)}if(r.get("direct-display")==="false"){if(v.substr(0,9)==="user-join"){d(v.substr(10,6))}else{if(v.substr(0,9)==="user-exit"){e(v.substr(10,6))}else{if(v.substr(0,7)==="clients"){v=v.substr(7);if(v.length>1){while(v.length>0){var t=v.substr(1,6);d(t);v=v.substr(7)}}}else{if(v==="typing"){if(r.get("typing")==="true"){i(r.get("client-name"))}else{if(r.get("typing")==="false"){n(r.get("client-name"))}}}else{console.log(r.get("type"));$("#messages").append('<div class="small-card"><p class="status">'+v+"</p></div>")}}}}}else{var u=r.get("client-name");var y=r.get("text-color");$("#messages").append('<div class="small-card" style="background-color:#'+u+'"><p style="color:#'+y+'">'+v+"</p></div>")}}function c(r){$("#status").replaceWith('<div class="small-card" id="status"><p class="status">Connected!</p>');window.setTimeout(function(){$("#status").remove()},3000)}function h(r){$("#updates").append('<div class="small-card"><p class="warn">Disconnected</p></div>');window.setTimeout(function(){$("#updates").append('<div class="small-card"><p class="status">Reloading...</p></div>');location.reload()},3000)}function b(r){$("#updates").append('<div class="small-card"><p class="warn">Error!</p></div>')}var k=true;var o=false;$("#message").on("change keyup keydown paste",function(){if(k){if(o==false){o=true;j.send("type:typing,typing:true|true")}k=false;setTimeout(function(){k=true;setTimeout(function(){if(k){j.send("type:typing,typing:false|false");o=false}},300)},1000)}});$("html").css("font-size",Cookies.get("font-size"));$("#text-up").on("click",function(){var r=parseFloat(window.getComputedStyle(document.getElementById("html")).fontSize);$("#font-size").remove();$("html").css("font-size",(r+1)+"px");Cookies.set("font-size",(r+1)+"px")});$("#text-dn").on("click",function(){var r=parseFloat(window.getComputedStyle(document.getElementById("html")).fontSize);$("#font-size").remove();$("html").css("font-size",(r-1)+"px");Cookies.set("font-size",(r-1)+"px")});function a(r){if(r==="light"||r==="dark"||r==="rainbow"){}else{r="light"}$("#theme-styles").attr("href",f+"/src/common/"+r+"-common.min.css");Cookies.set("theme",r);$(".theme-button").show();$("#"+r+"-theme-button").hide()}a(Cookies.get("theme"));$(".theme-button").each(function(){var r=$(this);r.on("click",function(){a(r.attr("data"))})});function l(r){if(r==="light"){$("p").css("font-weight","200");$(".bold").css("font-weight","400");$("h6").css("font-weight","400");$("#font-light-button").hide();$("#font-normal-button").show();Cookies.set("font-weight","light")}else{$("p").css("font-weight","400");$(".bold").css("font-weight","600");$("h6").css("font-weight","600");$("#font-normal-button").hide();$("#font-light-button").show();Cookies.set("font-weight","normal")}}l(Cookies.get("font-weight"));$("#font-light-button").on("click",function(){l("light")});$("#font-normal-button").on("click",function(){l("normal")});$(".ajax-bar").each(function(){$(this).show()});$("#option-pane-open-button").on("click",function(){$("#option-pane").show();$("#option-pane-close-button").show();$(this).hide()});$("#option-pane-close-button").on("click",function(){$("#option-pane").hide();$("#option-pane-open-button").show();$(this).hide()})});