<title>Your Account ~ xarql</title>
<!-- END HEAD -->
<div class="large-card">
    <h4>${username}</h4>
    <p>${email}</p>
    <p><a href="${domain}/user/view?name=${username}">Public Profile</a></p>
    <p><a href="${domain}/chat/dm">Direct Messages</a></p>
    <p><a href="${domain}">Home</a></p>
</div>
<c:if test="${not empty msg}">
    <div class="small-card">
        <p class="centered">${msg}</p>
    </div>
</c:if>
<c:if test="${not empty fail}">
    <div class="small-card">
        <h5 class="warn">Error:</h5>
        <p>${fail}</p>
    </div>
</c:if>
<div class="large-card">
    <h6>Log Out</h6>
    <p>This will remove your session from the server. Use a recaptcha or log in again to post.</p>
    <form action="${domain}/user/act?type=log_out" method="POST" accept-charset="UTF-8">
        <input type="submit" class="button" value="Log Out">
    </form>
</div>
<div class="large-card">
    <h6>Attach Email</h6>
    <p>Attach an email to your account for future recovery or id</p>
    <form action="${domain}/user/act?type=attach_email" method="POST" accept-charset="UTF-8" spellcheck="false">
        <input type="email" name="email" placeholder="Email" maxlength="512" required>
        <input type="submit" class="button" value="Attach">
    </form>
</div>
<div class="large-card">
    <h6 class="warn">Change Password</h6>
    <p>Enter your current password and a new password twice to change your password. Your password can't be recovered by xarql.com. <a href="${domain}/help/account">Learn More</a></p>
    <form class="user-form" action="${domain}/user/act?type=password_change" method="POST" accept-charset="UTF-8" spellcheck="false">
        <input type="password" name="password" placeholder="Current Password" minlength="6" maxlength="128" required>
        <input id="password" type="password" name="new_password" placeholder="New Password" minlength="6" maxlength="128" required>
        <input id="password_confirmation" name="retype" type="password" placeholder="Retype Replacement" required>
        <input type="submit" class="button" value="Change">
    </form>
</div>
<div class="large-card">
    <h6 class="warn">Delete</h6>
    <p>Enter your password and username to delete your account. Other users may claim your username after you do this. <a href="${domain}/help/account">Learn More</a></p>
    <form class="user-form" action="${domain}/user/act?type=delete" method="POST" accept-charset="UTF-8" spellcheck="false">
        <input type="text" name="username" placeholder="Username" required>
        <input id="password" type="password" name="password" placeholder="Password" required>
        <input type="submit" class="button" value="Delete">
    </form>
</div>
<script>
    var password = document.getElementById("password"),
        confirm_password = document.getElementById("password_confirmation");

    function validatePassword() {
        if (password.value != confirm_password.value) {
            confirm_password.setCustomValidity("Passwords Don't Match");
        } else {
            confirm_password.setCustomValidity('');
        }
    }

    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;
</script>
